<!DOCTYPE html>
<html>
	<head>
    	<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
		<style>
	        body, html {
	            padding: 0;
	            margin: 0;
	            width: 100%;
	            height: 100%;
	        }
	        #map {
	            width: 100%;
	            height: 100%;
	        }
		</style>
   </head>
	<body >
		<div id="map"></div>
		<script type="text/javascript">
		'use strict';
		
	    class City {
	 	    constructor(lat, lon, persons) {
	    	this.lat = lat;
	    	this.lon = lon;
	    	this.persons = persons;
	    	}
		}

		var PersonsPetr = ['Petrov Ilia Olegovich', 'Titov Sergey Alekseevich'];
		var PersonsMosc = ['Yuriy Antonovich Kamnev'];
		var PersonsLond = ['Hans Johann'];
		var PersonsPsko = ['Pyshkin Igor Sergeyvich', 'Korotkevich Gennadiy Petrovich', 'Smykov Mikhail Vladimirovich'];

		let Petrozavodsk = new City(61.7849100, 34.3469100, PersonsPetr);
		let Moscow = new City(55.7522200, 37.6155600, PersonsMosc);
		let London = new City(51.506415, -0.127201, PersonsLond);
		let Pskov = new City(57.8136000, 28.3496000, PersonsPsko);
		
		var cities = {
			'Petrozavodsk': Petrozavodsk,
			'Moscow': Moscow,
			'London': London,
			'Pskov': Pskov,
		};

		function sizeOfMarker(count){
			var maxSize = 60;
			var minSize = 30;
			return ((maxSize - minSize) * (count * 2)/10 + (maxSize - minSize));
		}

		ymaps.ready(init);

		function init() {
	    	var myMap = new ymaps.Map('map', {
	        	center: [55.753994, 37.622093],
	        	zoom: 4
	    	});
	    	for (var i in cities) {
		    	var myPlacemark = new ymaps.Placemark([cities[i].lat, cities[i].lon], {
		    		balloonContentHeader: cities[i].persons.length ,
            		balloonContentBody: cities[i].persons,
	        	    iconCaption: i,
	        	   

	    		}, {
	        	 	iconLayout: 'default#image',
	        	 	iconImageHref: 'marker.png',
	        	 	iconImageSize: [sizeOfMarker(cities[i].persons.length), sizeOfMarker(cities[i].persons.length)],
	        	 	iconImageOffset: [-sizeOfMarker(cities[i].persons.length)/2, -sizeOfMarker(cities[i].persons.length)]

	    		});

		    	  myMap.geoObjects.add(myPlacemark);
		    }

		}
		</script>
    </body>
</html>